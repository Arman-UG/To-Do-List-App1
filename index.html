<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>To-Do List App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --primary: #667eea;
            --primary-dark: #5a67d8;
            --primary-light: #e9eafc;
            --danger: #e53e3e;
            --danger-light: #ffe5e5;
            --success: #38a169;
            --info: #4299e1;
            --gray: #a0aec0;
            --bg: #f7fafc;
            --radius: 16px;
        }
        html, body {
            height: 100%;
        }
        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fff;
            padding: 12px 24px;
            border-radius: 0 0 var(--radius) var(--radius);
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            margin-bottom: 32px;
        }
        .navbar-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .navbar-left img {
            width: 32px;
            height: 32px;
        }
        .navbar-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-dark);
            letter-spacing: 1px;
        }
        .navbar-links {
            display: flex;
            gap: 20px;
        }
        .navbar-links a {
            text-decoration: none;
            color: #434190;
            font-weight: 500;
            font-size: 1rem;
            transition: color 0.2s;
            position: relative;
        }
        .navbar-links a.active,
        .navbar-links a:focus {
            color: var(--primary);
            font-weight: 700;
        }
        .navbar-links a.active::after {
            content: '';
            display: block;
            margin: 0 auto;
            width: 24px;
            height: 2px;
            background: var(--primary);
            border-radius: 2px;
            margin-top: 2px;
        }
        .container {
            max-width: 600px;
            margin: 40px auto;
            background: #fff;
            border-radius: var(--radius);
            box-shadow: 0 4px 24px rgba(0,0,0,0.08);
            padding: 32px 24px 16px 24px;
        }
        header h1 {
            text-align: center;
            color: #333;
            margin-bottom: 24px;
            font-weight: 700;
            letter-spacing: 1px;
        }
        .add-task form {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        #new-task {
            flex: 2 1 160px;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
            transition: border 0.2s;
            min-width: 0;
        }
        #new-task:focus {
            border-color: #7f9cf5;
        }
        #task-time {
            flex: 1 1 90px;
            min-width: 90px;
            max-width: 140px;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
            transition: border 0.2s;
        }
        button[type="submit"] {
            background: linear-gradient(90deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 0 20px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s;
        }
        button[type="submit"]:hover {
            background: linear-gradient(90deg, var(--primary-dark) 0%, #434190 100%);
        }
        .add-task .action-btns {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        .action-btns button {
            flex: 1;
            padding: 10px 0;
            font-size: 1rem;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        #delete-all {
            background: linear-gradient(90deg, var(--danger) 0%, #f56565 100%);
            color: #fff;
        }
        #history-btn {
            background: linear-gradient(90deg, #38b2ac 0%, var(--info) 100%);
            color: #fff;
        }
        .tasks {
            margin-top: 24px;
        }
        #task-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        #task-list li {
            display: flex;
            align-items: center;
            background: var(--bg);
            margin-bottom: 12px;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.03);
            font-size: 1rem;
            transition: background 0.2s;
            gap: 8px;
        }
        #task-list li.completed {
            text-decoration: line-through;
            color: var(--gray);
            background: #e2e8f0;
        }
        #task-list li.overdue {
            background: linear-gradient(90deg, var(--danger-light) 60%, #fed7d7 100%) !important;
            border: 1.5px solid var(--danger);
            color: var(--danger) !important;
            font-weight: 600;
            filter: none !important;
        }
        #task-list li.blur-task {
            filter: blur(2px) grayscale(0.5) opacity(0.7);
            pointer-events: none;
        }
        #task-list .task-time {
            background: #edf2f7;
            color: var(--primary-dark);
            font-size: 0.98rem;
            border-radius: 6px;
            padding: 2px 10px;
            margin-right: 8px;
            font-weight: 500;
            letter-spacing: 1px;
        }
        #task-list .complete-btn {
            background: linear-gradient(90deg,#38a169 0%,var(--info) 100%);
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 4px 12px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: background 0.2s;
        }
        #task-list .complete-btn:hover {
            background: linear-gradient(90deg,var(--info) 0%,#38a169 100%);
        }
        #task-list .delete-btn {
            background: none;
            border: none;
            color: var(--danger);
            font-size: 1.1rem;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        #task-list .delete-btn:hover {
            background: var(--danger-light);
        }
        /* About & History */
        .about-section, .history-section {
            max-width: 700px;
            margin: 60px auto 0 auto;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.09);
            padding: 36px 28px 32px 28px;
            display: none;
            animation: fadeIn 0.5s;
        }
        .about-section { display: none; }
        .about-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .about-title span { font-size: 2rem; }
        .about-desc {
            color: #444;
            font-size: 1.08rem;
            margin-bottom: 28px;
            line-height: 1.6;
        }
        .about-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        .feature-card {
            background: linear-gradient(120deg, var(--bg) 60%, var(--primary-light) 100%);
            border-radius: 14px;
            box-shadow: 0 2px 10px rgba(100, 100, 200, 0.06);
            padding: 22px 18px 18px 18px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
            min-height: 120px;
            transition: box-shadow 0.2s, transform 0.2s;
        }
        .feature-card:hover {
            box-shadow: 0 6px 24px rgba(100, 100, 200, 0.13);
            transform: translateY(-2px) scale(1.03);
        }
        .feature-icon { font-size: 1.5rem; margin-bottom: 2px; }
        .feature-title { font-weight: 600; color: #434190; font-size: 1.08rem; }
        .feature-desc { color: #555; font-size: 0.98rem; line-height: 1.5; }
        .history-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }
        .history-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--info);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        #close-history {
            background: linear-gradient(90deg,var(--primary) 0%,var(--primary-dark) 100%);
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 7px 18px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s;
        }
        #close-history:hover {
            background: linear-gradient(90deg,var(--primary-dark) 0%,#434190 100%);
        }
        #delete-history {
            background: linear-gradient(90deg,var(--danger) 0%,#f56565 100%);
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 10px 0;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s;
            width: 100%;
            margin-bottom: 18px;
        }
        #history-list {
            list-style: none;
            padding: 0;
            margin: 0;
            max-height: 350px;
            overflow-y: auto;
        }
        #history-list li {
            background: linear-gradient(90deg,var(--bg) 60%,var(--primary-light) 100%);
            margin-bottom: 14px;
            padding: 14px 18px;
            border-radius: 10px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.04);
            display: flex;
            flex-direction: column;
            gap: 4px;
            font-size: 1rem;
            position: relative;
            animation: fadeIn 0.4s;
        }
        .history-task-completed { color: var(--success); font-weight: 600; }
        .history-task-deleted { color: var(--danger); font-weight: 600; }
        .history-date { font-size: 0.92rem; color: var(--gray); }
        .history-strike { text-decoration: line-through; color: var(--gray); }
        #no-history { text-align:center;color:var(--gray);margin-top:30px;display:none; }
        /* Modals */
        .modal-bg {
            display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;
            background:rgba(60,60,80,0.18);z-index:1000;align-items:center;justify-content:center;
        }
        .modal-content {
            background:#fff;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,0.18);
            padding:32px 28px 24px 28px;max-width:340px;width:90vw;text-align:center;animation:fadeIn 0.3s;
        }
        .modal-content .modal-icon { font-size:2.2rem;margin-bottom:10px; }
        .modal-content .modal-title { font-size:1.15rem;font-weight:600;margin-bottom:18px; }
        .modal-content .modal-desc { color:#555;font-size:1rem;margin-bottom:24px; }
        .modal-content .modal-actions { display:flex;gap:12px;justify-content:center; }
        .modal-content .modal-actions button {
            flex:1;
            border-radius:8px;
            padding:10px 0;
            font-size:1rem;
            cursor:pointer;
            border:none;
            transition:background 0.2s;
        }
        .modal-cancel { background:var(--bg);color:#434190; }
        .modal-danger { background:linear-gradient(90deg,var(--danger) 0%,#f56565 100%);color:#fff; }
        .modal-success { background:linear-gradient(90deg,#38a169 0%,var(--info) 100%);color:#fff; }
        .modal-info { background:linear-gradient(90deg,var(--primary) 0%,var(--primary-dark) 100%);color:#fff; }
        /* Responsive */
        @media (max-width: 900px) {
            .about-section, .history-section { max-width: 98vw; padding: 24px 6vw 20px 6vw; }
        }
        @media (max-width: 700px) {
            .about-features { grid-template-columns: 1fr; }
        }
        @media (max-width: 600px) {
            .container { max-width: 98vw; padding: 16px 4vw 8px 4vw; }
            .about-section, .history-section { padding: 16px 4vw 12px 4vw; }
        }
        @media (max-width: 500px) {
            .navbar { flex-direction: column; gap: 10px; padding: 10px 8px; }
            .container { padding: 12px 2vw 6px 2vw; }
            .add-task form { flex-direction: column; gap: 8px; }
            #new-task, #task-time, button[type="submit"] { width: 100%; }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-left">
            <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f604.png" alt="Happy" />
            <span class="navbar-title">Add your daily task</span>
        </div>
        <div class="navbar-links">
            <a href="#" id="home-link" class="active">Home</a>
            <a href="#" id="about-link">About</a>
        </div>
    </nav>
    <div class="container" id="main-container">
        <header>
            <h1>To-Do List</h1>
        </header>
        <section class="add-task">
            <form id="task-form" autocomplete="off">
                <input type="text" id="new-task" placeholder="Add a new task..." required>
                <input type="time" id="task-time" required>
                <button type="submit">Add</button>
            </form>
            <div class="action-btns">
                <button id="delete-all">Delete All</button>
                <button id="history-btn">History</button>
            </div>
        </section>
        <section class="tasks">
            <ul id="task-list"></ul>
        </section>
        <footer>
            <p>&copy; 2025 To-Do List App</p>
        </footer>
    </div>
    <section class="about-section" id="about-section">
        <div class="about-title"><span>📋</span> About This Todo List</div>
        <div class="about-desc">
            This Todo List web application is designed to help individuals and teams stay organized, focused, and productive. Whether you're managing daily tasks, planning projects, or tracking goals, this tool offers a simple and efficient way to get things done.<br><br>
            <strong>Key Features:</strong>
        </div>
        <div class="about-features">
            <div class="feature-card">
                <div class="feature-icon">✅</div>
                <div class="feature-title">User-Friendly Interface</div>
                <div class="feature-desc">Intuitive design for quick task creation and management.</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">📅</div>
                <div class="feature-title">Deadline Tracking</div>
                <div class="feature-desc">Stay on top of important dates and priorities.</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">🔄</div>
                <div class="feature-title">Real-Time Updates</div>
                <div class="feature-desc">Seamless task editing and completion.</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">🌐</div>
                <div class="feature-title">Accessible Anywhere</div>
                <div class="feature-desc">Built for desktop and mobile use.</div>
            </div>
        </div>
        <div class="about-desc" style="margin-top:28px;">
            This site is part of a broader initiative to create reliable, fast, and secure web tools that enhance everyday workflows. It’s lightweight, responsive, and built with modern web standards to ensure performance and accessibility.
        </div>
    </section>
    <section class="history-section" id="history-section">
        <div class="history-header">
            <span class="history-title">🕓 Task History</span>
            <button id="close-history" title="Back to Home">&larr; Back</button>
        </div>
        <button id="delete-history">Delete History</button>
        <ul id="history-list"></ul>
        <div id="no-history">No history found.</div>
    </section>
    <!-- Delete All Modal -->
    <div id="delete-modal" class="modal-bg">
        <div class="modal-content">
            <div class="modal-icon">⚠️</div>
            <div class="modal-title" style="color:var(--danger);">Delete All Tasks?</div>
            <div class="modal-desc">Are you sure you want to delete all your tasks? This action cannot be undone.</div>
            <div class="modal-actions">
                <button id="cancel-delete" class="modal-cancel">Cancel</button>
                <button id="confirm-delete" class="modal-danger">Delete All</button>
            </div>
        </div>
    </div>
    <!-- Delete History Modal -->
    <div id="delete-history-modal" class="modal-bg">
        <div class="modal-content">
            <div class="modal-icon">🗑️</div>
            <div class="modal-title" style="color:var(--danger);">Delete All History?</div>
            <div class="modal-desc">Are you sure you want to delete all your history? This action cannot be undone.</div>
            <div class="modal-actions">
                <button id="cancel-delete-history" class="modal-cancel">Cancel</button>
                <button id="confirm-delete-history" class="modal-danger">Delete History</button>
            </div>
        </div>
    </div>
    <!-- Reminder Modal -->
    <div id="reminder-modal" class="modal-bg" style="z-index:2000;">
        <div class="modal-content">
            <div class="modal-icon">⏰</div>
            <div id="reminder-title" class="modal-title" style="color:var(--info);">Task Reminder</div>
            <div id="reminder-message" class="modal-desc"></div>
            <div class="modal-actions">
                <button id="reminder-complete" class="modal-success">Complete Task</button>
                <button id="reminder-close" class="modal-cancel">Close</button>
            </div>
        </div>
    </div>
    <script>
        // Elements
        const form = document.getElementById('task-form');
        const taskInput = document.getElementById('new-task');
        const taskTime = document.getElementById('task-time');
        const taskList = document.getElementById('task-list');
        const deleteAllBtn = document.getElementById('delete-all');
        const historyBtn = document.getElementById('history-btn');
        const deleteModal = document.getElementById('delete-modal');
        const cancelDelete = document.getElementById('cancel-delete');
        const confirmDelete = document.getElementById('confirm-delete');
        const reminderModal = document.getElementById('reminder-modal');
        const reminderTitle = document.getElementById('reminder-title');
        const reminderMessage = document.getElementById('reminder-message');
        const reminderComplete = document.getElementById('reminder-complete');
        const reminderClose = document.getElementById('reminder-close');
        const historySection = document.getElementById('history-section');
        const historyList = document.getElementById('history-list');
        const noHistory = document.getElementById('no-history');
        const closeHistory = document.getElementById('close-history');
        const mainContainer = document.getElementById('main-container');
        const aboutSection = document.getElementById('about-section');
        const homeLink = document.getElementById('home-link');
        const aboutLink = document.getElementById('about-link');
        const deleteHistoryBtn = document.getElementById('delete-history');
        const deleteHistoryModal = document.getElementById('delete-history-modal');
        const cancelDeleteHistory = document.getElementById('cancel-delete-history');
        const confirmDeleteHistory = document.getElementById('confirm-delete-history');

        // Data
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let history = JSON.parse(localStorage.getItem('history')) || [];
        let reminderState = {};
        let currentReminderTaskIndex = null;

        // Save/Load
        function saveTasks() { localStorage.setItem('tasks', JSON.stringify(tasks)); }
        function saveHistory() { localStorage.setItem('history', JSON.stringify(history)); }

        // Render Tasks
        function renderTasks() {
            taskList.innerHTML = '';
            const now = new Date();
            tasks.forEach((task, index) => {
                const li = document.createElement('li');
                // Time
                if (task.time) {
                    const timeSpan = document.createElement('span');
                    timeSpan.className = 'task-time';
                    timeSpan.textContent = task.time;
                    li.appendChild(timeSpan);
                }
                // Text
                const textSpan = document.createElement('span');
                textSpan.textContent = task.text;
                li.appendChild(textSpan);

                // Overdue/Blur logic
                let isOverdue = false, isBlur = false;
                if (task.time && !task.completed) {
                    const today = new Date();
                    const [h, m] = task.time.split(':');
                    const taskDate = new Date(today.getFullYear(), today.getMonth(), today.getDate(), h, m);
                    const diff = taskDate - now;
                    if (diff < 0) { isOverdue = true; isBlur = true; }
                }
                if (task.completed) li.classList.add('completed');
                if (isOverdue) li.classList.add('overdue');
                if (isBlur) li.classList.add('blur-task');

                // Complete button
                if (!task.completed && !isBlur) {
                    const completeBtn = document.createElement('button');
                    completeBtn.textContent = 'Complete';
                    completeBtn.className = 'complete-btn';
                    completeBtn.onclick = function(e) {
                        e.stopPropagation();
                        tasks[index].completed = true;
                        history.push({ ...tasks[index], completedAt: new Date().toISOString() });
                        saveTasks(); saveHistory(); renderTasks();
                    };
                    li.appendChild(completeBtn);
                }

                // Delete button
                const delBtn = document.createElement('button');
                delBtn.textContent = '✕';
                delBtn.title = 'Delete';
                delBtn.className = 'delete-btn';
                delBtn.onclick = function(e) {
                    e.stopPropagation();
                    history.push({ ...tasks[index], deletedAt: new Date().toISOString() });
                    saveHistory();
                    tasks.splice(index, 1);
                    saveTasks();
                    renderTasks();
                };
                li.appendChild(delBtn);

                // Toggle complete on click (except if blur or already completed)
                li.addEventListener('click', function() {
                    if (isBlur || task.completed) return;
                    tasks[index].completed = !tasks[index].completed;
                    if (tasks[index].completed) {
                        history.push({ ...tasks[index], completedAt: new Date().toISOString() });
                        saveHistory();
                    }
                    saveTasks();
                    renderTasks();
                });

                taskList.appendChild(li);
            });
        }

        // Add Task
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const taskText = taskInput.value.trim();
            const timeValue = taskTime.value;
            if (taskText && timeValue) {
                tasks.push({ text: taskText, time: timeValue, completed: false, createdAt: new Date().toISOString() });
                saveTasks();
                renderTasks();
                taskInput.value = '';
                taskTime.value = '';
            }
        });

        // Delete All Modal
        deleteAllBtn.onclick = () => { if (tasks.length) deleteModal.style.display = 'flex'; };
        cancelDelete.onclick = () => deleteModal.style.display = 'none';
        confirmDelete.onclick = () => {
            tasks.forEach(task => history.push({ ...task, deletedAt: new Date().toISOString() }));
            saveHistory();
            tasks = [];
            saveTasks();
            renderTasks();
            deleteModal.style.display = 'none';
        };

        // Delete History Modal
        deleteHistoryBtn.onclick = () => { if (history.length) deleteHistoryModal.style.display = 'flex'; };
        cancelDeleteHistory.onclick = () => deleteHistoryModal.style.display = 'none';
        confirmDeleteHistory.onclick = () => {
            history = [];
            saveHistory();
            renderHistory();
            deleteHistoryModal.style.display = 'none';
        };

        // Reminder Modal
        function showReminderModal(task, index, minutesLeft) {
            currentReminderTaskIndex = index;
            reminderTitle.textContent = "⏰ Task Reminder";
            reminderMessage.innerHTML = `You have <b>${minutesLeft} minutes</b> left for: <br><b>${task.text}</b> (${task.time})`;
            reminderModal.style.display = 'flex';
        }
        function closeReminderModal() {
            reminderModal.style.display = 'none';
            currentReminderTaskIndex = null;
        }
        reminderClose.onclick = closeReminderModal;
        reminderComplete.onclick = function() {
            if (currentReminderTaskIndex !== null && tasks[currentReminderTaskIndex]) {
                tasks[currentReminderTaskIndex].completed = true;
                history.push({ ...tasks[currentReminderTaskIndex], completedAt: new Date().toISOString() });
                saveTasks();
                saveHistory();
                renderTasks();
            }
            closeReminderModal();
        };

        // Desktop Notification Permission
        if ('Notification' in window && Notification.permission !== 'granted') {
            Notification.requestPermission();
        }
        function showDesktopNotification(task, minutesLeft) {
            if ('Notification' in window && Notification.permission === 'granted') {
                let title = '⏰ Task Reminder';
                let body = `You have ${minutesLeft} minute${minutesLeft === 1 ? '' : 's'} left for: ${task.text} (${task.time})`;
                new Notification(title, { body });
            }
        }

        // Reminder/Overdue check logic
        function checkReminders() {
            const now = new Date();
            tasks.forEach((task, idx) => {
                if (!task.time || task.completed) return;
                const today = new Date();
                const [h, m] = task.time.split(':');
                const taskDate = new Date(today.getFullYear(), today.getMonth(), today.getDate(), h, m);
                const diffMs = taskDate - now;
                const diffMin = Math.floor(diffMs / 60000);

                // Only remind for today tasks
                if (diffMin === 5 || diffMin === 1) {
                    showDesktopNotification(task, diffMin);
                    showReminderModal(task, idx, diffMin);
                    reminderState[idx] = now;
                } else if (diffMin <= 30 && diffMin > 0) {
                    if (diffMin > 15) {
                        if (!reminderState[idx] || (reminderState[idx] && now - reminderState[idx] >= 10 * 60000)) {
                            showReminderModal(task, idx, diffMin);
                            reminderState[idx] = now;
                        }
                    } else if (diffMin > 5) {
                        if (!reminderState[idx] || (reminderState[idx] && now - reminderState[idx] >= 10 * 60000)) {
                            showReminderModal(task, idx, diffMin);
                            reminderState[idx] = now;
                        }
                    } else if (diffMin < 5 && diffMin > 1) {
                        if (!reminderState[idx] || (reminderState[idx] && now - reminderState[idx] >= 4 * 60000)) {
                            showReminderModal(task, idx, diffMin);
                            reminderState[idx] = now;
                        }
                    }
                }
            });
        }
        setInterval(checkReminders, 60000);
        setTimeout(checkReminders, 1000);

        // History
        function renderHistory() {
            historyList.innerHTML = '';
            if (history.length === 0) {
                noHistory.style.display = 'block';
                return;
            }
            noHistory.style.display = 'none';
            history.slice(-50).reverse().forEach(item => {
                const li = document.createElement('li');
                let timeHtml = item.time ? `<span class="task-time">${item.time}</span>` : '';
                if (item.completedAt) {
                    li.innerHTML = `${timeHtml}<span class="history-strike">${item.text}</span>
                        <span class="history-task-completed">Completed</span>
                        <span class="history-date">${new Date(item.completedAt).toLocaleString()}</span>`;
                } else if (item.deletedAt) {
                    li.innerHTML = `${timeHtml}<span>${item.text}</span>
                        <span class="history-task-deleted">Deleted</span>
                        <span class="history-date">${new Date(item.deletedAt).toLocaleString()}</span>`;
                }
                historyList.appendChild(li);
            });
        }

        // Navigation
        historyBtn.onclick = () => {
            mainContainer.style.display = 'none';
            aboutSection.style.display = 'none';
            historySection.style.display = 'block';
            homeLink.classList.remove('active');
            aboutLink.classList.remove('active');
            renderHistory();
        };
        closeHistory.onclick = () => {
            historySection.style.display = 'none';
            mainContainer.style.display = '';
            homeLink.classList.add('active');
        };
        homeLink.onclick = e => {
            e.preventDefault();
            homeLink.classList.add('active');
            aboutLink.classList.remove('active');
            mainContainer.style.display = '';
            aboutSection.style.display = 'none';
            historySection.style.display = 'none';
        };
        aboutLink.onclick = e => {
            e.preventDefault();
            aboutLink.classList.add('active');
            homeLink.classList.remove('active');
            mainContainer.style.display = 'none';
            aboutSection.style.display = 'block';
            historySection.style.display = 'none';
        };
    </script>
</body>
</html>